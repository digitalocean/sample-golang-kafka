spec:
  name: sample-golang-kafka
  envs:
    - scope: RUN_TIME
      type: GENERAL
      key: KAFKA_BROKER
      value: "${kafkatest2.HOSTNAME}:${kafkatest2.PORT}"
    - scope: RUN_TIME
      type: GENERAL
      key: KAFKA_TOPIC
      value: sample-topic
    - scope: RUN_TIME
      type: GENERAL
      key: KAFKA_USERNAME
      value: "${kafkatest2.USERNAME}"
    - scope: RUN_TIME
      type: GENERAL
      key: KAFKA_PASSWORD
      value: "${kafkatest2.PASSWORD}"
    - scope: RUN_TIME
      type: GENERAL
      key: KAFKA_CA_CERT
      value: "${kafkatest2.CA_CERT}"
  services:
    - name: producer
      source_dir: producer
      git:
        branch: main
        repo_clone_url: https://github.com/digitalocean/sample-golang-kafka.git
  workers:
    - name: consumer
      source_dir: consumer
      git:
        repo_clone_url: https://github.com/digitalocean/sample-golang-kafka.git
        branch: main
